<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Mon Mar 17 15:31:12 GMT 2014 -->
<TITLE>
DocumentRevisionTree (cloudant-sync-datastore-android 0.3.4 API)
</TITLE>

<META NAME="date" CONTENT="2014-03-17">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DocumentRevisionTree (cloudant-sync-datastore-android 0.3.4 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionBuilder.html" title="class in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/DocumentRevisionTree.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DocumentRevisionTree.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.cloudant.sync.datastore</FONT>
<BR>
Class DocumentRevisionTree</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>com.cloudant.sync.datastore.DocumentRevisionTree</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>DocumentRevisionTree</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<p>Describes the document tree for a single
 document within the datastore.</p>

 <p>A document within a <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore"><CODE>Datastore</CODE></A> is actually a collection of trees
 of revisions. These trees describe the history of the document, and are the
 core of the MVCC data model which allows data to be safely replicated
 between datastores. Replication consists of copying parts of the tree
 in the source database that are not present in the target database to the
 target database.</p>

 <p>Commonly, there will be a single tree with no branches, just
 a straight history. This can be represented as follows, abbreviating
 revision IDs to their generation numbers:</p>

 <pre>
     1 -> 2 -> 3
 </pre>

 <p>A full revision ID looks like <code>1-aedlfksenef</code>, that is the
 generation number combined with an opaque
 string which identifies this revision vs other revisions with the same
 generation number (see below for when this occurs).</p>

 <p>A document can gain branches in its tree. Consider the following sequence
 of events:</p>

 <ol>
     <li>A document is created in datastore A and replicated to datastore
     B.</li>
     <li>The document is edited in both A and B.</li>
     <li>Datastore B is then replicated back to A, bringing with it the
     changes in the document.</li>
 </ol>

 <p>As described above, replication merges the parts of a document tree not
 in the target datastore into the target datastore. This means we now have
 a branched tree containing the edits from both A and B:</p>

 <pre>
     1 ->  2  -> 3 -> 4
       \-> 2^ -> 3^
 </pre>

 <p>At this point we have a conflicted document: two or more branches
 terminating in leaf nodes which are not deleted, or <em>active</em>.</p>

 <p>In this case, to resolve the conflict the application would need to:</p>

 <ol>
     <li>Call <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument(java.lang.String, java.lang.String)"><CODE>Datastore.getDocument(String, String)</CODE></A> to get the
     revisions <code>4</code> and <code>3^</code>.</li>
     <li>Merge these documents together in some way.</li>
     <li>Save a new revision in the <code>4</code> branch using
     <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#updateDocument(java.lang.String, java.lang.String, com.cloudant.sync.datastore.DocumentBody)"><CODE>Datastore.updateDocument(String, String, DocumentBody)</CODE></A></li>
     <li>Delete the <code>3^</code> revision using
     <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)"><CODE>Datastore.deleteDocument(String, String)</CODE></A>.</li>
 </ol>

 <p>This process leaves us still with two branches. Because only one
 terminates in an active leaf, however, the document is no longer
 conflicted:</p>

 <pre>
     1 ->  2  -> 3  -> 4 -> 5
       \-> 2^ -> 3^ -> (4^ deleted)
 </pre>

 <p>Finally, a document may have multiple document trees. This can happen if
 a document with the same ID is created in two datastores, and subsequently
 these two datastores are replicated:</p>

 <pre>
     1  -> 2  -> 3
     1* -> 2* -> 3* -> 4*
       \-> 2^ -> 3^
 </pre>

 <p>As an aside, this document has three conflicting revisions, which should
 be resolved as described above.</p>

 <p>There can obviously be more than two roots, as a many datastores can
 replicate together.</p>

 <p>At this point, it's possible to note that
 this class might better be called <code>DBObjectForest</code>. However, it's called
 <code>DocumentRevisionTree</code> because Tree is the common terminology used for the
 structure inside a document. As each individual tree's first revision is
 <code>1-something</code>, one could think of the document as a single tree with
 an implied <code>0-something</code> revision at the root.
 </p>

 <p>To construct a <code>DocumentRevisionTree</code>, first create an empty tree. Then
 call <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#add(com.cloudant.sync.datastore.DocumentRevision)"><CODE>add(DocumentRevision)</CODE></A> with each <code>DocumentRevision</code> in
 ascending generation order. For <code>DocumentRevision</code>s with the same generation,
 the order they are added in should not matter; a branch will be created
 automatically from the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html#getParent()"><CODE>DocumentRevision.getParent()</CODE></A>
 property of each <code>DocumentRevision</code>. This implies that if a <code>DocumentRevision</code>
 that is not the root of a tree (that is, it has a parent), the parent must
 be added first so the tree is constructed correctly.</p>

 <p>When a complete tree has been constructed, it's possible to work out
 things like the complete set of non-deleted leaf revisions (that is, the
 conflicted revisions for the document) and what is the current winning
 revision of the document.</p>

 <p><strong>WARNING:</strong> conflict resolution is coming in the next
 release, where we'll be adding methods to <code>Datastore</code> to help
 resolving conflicts:</p>

 <ul>
     <li>Get the IDs of all conflicted documents within the datastore.</li>
     <li>Get a list of all current revisions for a given document, so they
     can be merged to resolve the conflict.</li>
 </ul>
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A node in a document's revision tree history.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#DocumentRevisionTree()">DocumentRevisionTree</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct an empty tree.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#DocumentRevisionTree(com.cloudant.sync.datastore.DocumentRevision)">DocumentRevisionTree</A></B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&nbsp;documentRevision)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct a tree with a single root.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#add(com.cloudant.sync.datastore.DocumentRevision)">add</A></B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&nbsp;documentRevision)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a new <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> to the document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#bySequence(long)">bySequence</A></B>(long&nbsp;sequence)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> from this <code>DocumentRevisionTree</code> with
 a particular sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#depth(long)">depth</A></B>(long&nbsp;sequence)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the distance a revision is down the branch it's on.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#getCurrentRevision()">getCurrentRevision</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> that is the current winning revision
 for this <code>DocumentRevisionTree</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#getPath(long)">getPath</A></B>(long&nbsp;sequence)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the path as a list of revision IDs from the revision with
 the given sequence number to the root of the tree containing the
 revision.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#getPathForNode(long)">getPathForNode</A></B>(long&nbsp;sequence)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the path (list of <code>DocumentRevision</code>s) from the revision with
 the given sequence number to the root of the tree containing the
 revision.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#hasConflicts()">hasConflicts</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns whether this document is conflicted.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Set&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafRevisionIds()">leafRevisionIds</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the revision IDs for the leaf revisions of this document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafRevisions()">leafRevisions</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the leaf revisions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafs()">leafs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a list of the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><CODE>DocumentRevisionTree.DocumentRevisionNode</CODE></A>s which are leaf revisions
 of the branches in this document</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#lookup(java.lang.String, java.lang.String)">lookup</A></B>(java.lang.String&nbsp;id,
       java.lang.String&nbsp;rev)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> for a document ID and revision ID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#lookupChildByRevId(com.cloudant.sync.datastore.DocumentRevision, java.lang.String)">lookupChildByRevId</A></B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&nbsp;parentNode,
                   java.lang.String&nbsp;childRevision)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the child with a given revision ID of a parent
 <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#root(long)">root</A></B>(long&nbsp;sequence)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the root revision of this document with a given sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Map&lt;java.lang.Long,<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#roots()">roots</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the root revisions of this document in a mapping of sequence
 number to <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><CODE>DocumentRevisionTree.DocumentRevisionNode</CODE></A>.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DocumentRevisionTree()"><!-- --></A><H3>
DocumentRevisionTree</H3>
<PRE>
public <B>DocumentRevisionTree</B>()</PRE>
<DL>
<DD><p>Construct an empty tree.</p>
<P>
</DL>
<HR>

<A NAME="DocumentRevisionTree(com.cloudant.sync.datastore.DocumentRevision)"><!-- --></A><H3>
DocumentRevisionTree</H3>
<PRE>
public <B>DocumentRevisionTree</B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&nbsp;documentRevision)</PRE>
<DL>
<DD><p>Construct a tree with a single root.</p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>documentRevision</CODE> - a root of the revision tree</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="add(com.cloudant.sync.datastore.DocumentRevision)"><!-- --></A><H3>
add</H3>
<PRE>
public <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree</A> <B>add</B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&nbsp;documentRevision)</PRE>
<DL>
<DD><p>Adds a new <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> to the document.</p>

 <p>The <code>DocumentRevision</code>'s parent, if there is one, must already be in
 the document tree.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentRevision</CODE> - the <code>DocumentRevision</code> to add</DL>
</DD>
</DL>
<HR>

<A NAME="lookup(java.lang.String, java.lang.String)"><!-- --></A><H3>
lookup</H3>
<PRE>
public <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>lookup</B>(java.lang.String&nbsp;id,
                               java.lang.String&nbsp;rev)</PRE>
<DL>
<DD><p>Returns the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> for a document ID and revision ID.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - document ID<DD><CODE>rev</CODE> - revision ID
<DT><B>Returns:</B><DD>the <code>DocumentRevision</code> for the document and revision ID</DL>
</DD>
</DL>
<HR>

<A NAME="depth(long)"><!-- --></A><H3>
depth</H3>
<PRE>
public int <B>depth</B>(long&nbsp;sequence)</PRE>
<DL>
<DD><p>Returns the distance a revision is down the branch it's on.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sequence</CODE> - sequence number to identify the revision
<DT><B>Returns:</B><DD>the distance down the branch for the sequence number, <code>-1</code>
      if the sequence number isn't present in the document.</DL>
</DD>
</DL>
<HR>

<A NAME="lookupChildByRevId(com.cloudant.sync.datastore.DocumentRevision, java.lang.String)"><!-- --></A><H3>
lookupChildByRevId</H3>
<PRE>
public <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>lookupChildByRevId</B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&nbsp;parentNode,
                                           java.lang.String&nbsp;childRevision)</PRE>
<DL>
<DD><p>Returns the child with a given revision ID of a parent
 <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A>.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>parentNode</CODE> - parent <code>DocumentRevision</code><DD><CODE>childRevision</CODE> - revision to look for in child nodes
<DT><B>Returns:</B><DD>the child with a given revision ID of a <code>DocumentRevision</code>.</DL>
</DD>
</DL>
<HR>

<A NAME="bySequence(long)"><!-- --></A><H3>
bySequence</H3>
<PRE>
public <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>bySequence</B>(long&nbsp;sequence)</PRE>
<DL>
<DD><p>Returns a <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> from this <code>DocumentRevisionTree</code> with
 a particular sequence number.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sequence</CODE> - sequence number of the <code>DocumentRevision</code>
<DT><B>Returns:</B><DD>the <code>DocumentRevision</code> with the given sequence number,
     null if no <code>DocumentRevision</code> has the given sequence number.</DL>
</DD>
</DL>
<HR>

<A NAME="hasConflicts()"><!-- --></A><H3>
hasConflicts</H3>
<PRE>
public boolean <B>hasConflicts</B>()</PRE>
<DL>
<DD><p>Returns whether this document is conflicted.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if there is more than one branch terminated by an active
      leaf revision, otherwise false</DL>
</DD>
</DL>
<HR>

<A NAME="roots()"><!-- --></A><H3>
roots</H3>
<PRE>
public java.util.Map&lt;java.lang.Long,<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</A>&gt; <B>roots</B>()</PRE>
<DL>
<DD><p>Returns the root revisions of this document in a mapping of sequence
 number to <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><CODE>DocumentRevisionTree.DocumentRevisionNode</CODE></A>.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the root revisions of this document in a map</DL>
</DD>
</DL>
<HR>

<A NAME="root(long)"><!-- --></A><H3>
root</H3>
<PRE>
public <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</A> <B>root</B>(long&nbsp;sequence)</PRE>
<DL>
<DD><p>Returns the root revision of this document with a given sequence number.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the root revision of this document with a given sequence number</DL>
</DD>
</DL>
<HR>

<A NAME="leafs()"><!-- --></A><H3>
leafs</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</A>&gt; <B>leafs</B>()</PRE>
<DL>
<DD><p>Returns a list of the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><CODE>DocumentRevisionTree.DocumentRevisionNode</CODE></A>s which are leaf revisions
 of the branches in this document</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>list of leaf <code>DocumentRevisionNode</code>s</DL>
</DD>
</DL>
<HR>

<A NAME="leafRevisionIds()"><!-- --></A><H3>
leafRevisionIds</H3>
<PRE>
public java.util.Set&lt;java.lang.String&gt; <B>leafRevisionIds</B>()</PRE>
<DL>
<DD><p>Returns the revision IDs for the leaf revisions of this document.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the set of revision IDs for the leaf revisions of this document.</DL>
</DD>
</DL>
<HR>

<A NAME="leafRevisions()"><!-- --></A><H3>
leafRevisions</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt; <B>leafRevisions</B>()</PRE>
<DL>
<DD><p>Returns the leaf revisions</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the set of the DocumentRevision</DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentRevision()"><!-- --></A><H3>
getCurrentRevision</H3>
<PRE>
public <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>getCurrentRevision</B>()</PRE>
<DL>
<DD><p>Returns the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> that is the current winning revision
 for this <code>DocumentRevisionTree</code>.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> that is the current winning revision
 for this <code>DocumentRevisionTree</code>.</DL>
</DD>
</DL>
<HR>

<A NAME="getPathForNode(long)"><!-- --></A><H3>
getPathForNode</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt; <B>getPathForNode</B>(long&nbsp;sequence)</PRE>
<DL>
<DD><p>Returns the path (list of <code>DocumentRevision</code>s) from the revision with
 the given sequence number to the root of the tree containing the
 revision.</p>

 <p>The list of revisions is in order of appearance in the tree, where
 the first revision is the given <code>DocumentRevision</code> and the last revision
 is the root of the tree.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sequence</CODE> - sequence of the starting revision
<DT><B>Returns:</B><DD>list of <code>DocumentRevision</code>s from the revision with <code>sequence</code>
 to the root of the revision's tree.</DL>
</DD>
</DL>
<HR>

<A NAME="getPath(long)"><!-- --></A><H3>
getPath</H3>
<PRE>
public java.util.List&lt;java.lang.String&gt; <B>getPath</B>(long&nbsp;sequence)</PRE>
<DL>
<DD><p>Returns the path as a list of revision IDs from the revision with
 the given sequence number to the root of the tree containing the
 revision.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sequence</CODE> - sequence of the starting revision
<DT><B>Returns:</B><DD>list of revision IDs from the starting revision to the root of
   that revision's tree.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionBuilder.html" title="class in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/DocumentRevisionTree.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DocumentRevisionTree.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
