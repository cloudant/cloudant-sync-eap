<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_45) on Tue Jun 30 10:15:10 BST 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>DocumentRevisionTree (sync-android 0.12.3 API)</title>
<meta name="date" content="2015-06-30">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DocumentRevisionTree (sync-android 0.12.3 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionBuilder.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/cloudant/sync/datastore/DocumentRevisionTree.html" target="_top">Frames</a></li>
<li><a href="DocumentRevisionTree.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.cloudant.sync.datastore</div>
<h2 title="Class DocumentRevisionTree" class="title">Class DocumentRevisionTree</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.cloudant.sync.datastore.DocumentRevisionTree</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DocumentRevisionTree</span>
extends java.lang.Object</pre>
<div class="block"><p>Describes the document tree for a single
 document within the datastore.</p>

 <p>A document within a <a href="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore"><code>Datastore</code></a> is actually a collection of trees
 of revisions. These trees describe the history of the document, and are the
 core of the MVCC data model which allows data to be safely replicated
 between datastores. Replication consists of copying parts of the tree
 in the source database that are not present in the target database to the
 target database.</p>

 <p>Commonly, there will be a single tree with no branches, just
 a straight history. This can be represented as follows, abbreviating
 revision IDs to their generation numbers:</p>

 <pre>
     1 → 2 → 3
 </pre>

 <p>A full revision ID looks like <code>1-aedlfksenef</code>, that is the
 generation number combined with an opaque
 string which identifies this revision vs other revisions with the same
 generation number (see below for when this occurs).</p>

 <p>A document can gain branches in its tree. Consider the following sequence
 of events:</p>

 <ol>
     <li>A document is created in datastore A and replicated to datastore
     B.</li>
     <li>The document is edited in both A and B.</li>
     <li>Datastore B is then replicated back to A, bringing with it the
     changes in the document.</li>
 </ol>

 <p>As described above, replication merges the parts of a document tree not
 in the target datastore into the target datastore. This means we now have
 a branched tree containing the edits from both A and B:</p>

 <pre>
     1 → 2  → 3 → 4
      \→ 2^ → 3^
 </pre>

 <p>At this point we have a conflicted document: two or more branches
 terminating in leaf nodes which are not deleted, or <em>active</em>.</p>

 <p>In this case, to resolve the conflict the application would need to:</p>

 <ol>
     <li>Call <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument-java.lang.String-java.lang.String-"><code>Datastore.getDocument(String, String)</code></a> to get the
     revisions <code>4</code> and <code>3^</code>.</li>
     <li>Merge these documents together in some way.</li>
     <li>Save a new revision in the <code>4</code> branch using
     <a href="../../../../com/cloudant/sync/datastore/Datastore.html#updateDocumentFromRevision-com.cloudant.sync.datastore.MutableDocumentRevision-"><code>Datastore.updateDocumentFromRevision(MutableDocumentRevision)</code></a></li>
     <li>Delete the <code>3^</code> revision using
     <a href="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocumentFromRevision-com.cloudant.sync.datastore.BasicDocumentRevision-"><code>Datastore.deleteDocumentFromRevision(BasicDocumentRevision)</code></a></li>
 </ol>

 <p>This process leaves us still with two branches. Because only one
 terminates in an active leaf, however, the document is no longer
 conflicted:</p>

 <pre>
     1 →  2  → 3  → 4 → 5
      \→  2^ → 3^ → (4^ deleted)
 </pre>

 <p>Finally, a document may have multiple document trees. This can happen if
 a document with the same ID is created in two datastores, and subsequently
 these two datastores are replicated:</p>

 <pre>
     1  → 2  → 3
     1* → 2* → 3* → 4*
       \→ 2^ → 3^
 </pre>

 <p>As an aside, this document has three conflicting revisions, which should
 be resolved as described above.</p>

 <p>There can obviously be more than two roots, as a many datastores can
 replicate together.</p>

 <p>At this point, it's possible to note that
 this class might better be called <code>DBObjectForest</code>. However, it's called
 <code>DocumentRevisionTree</code> because Tree is the common terminology used for the
 structure inside a document. As each individual tree's first revision is
 <code>1-something</code>, one could think of the document as a single tree with
 an implied <code>0-something</code> revision at the root.
 </p>

 <p>To construct a <code>DocumentRevisionTree</code>, first create an empty tree. Then
 call <a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#add-com.cloudant.sync.datastore.BasicDocumentRevision-"><code>add(BasicDocumentRevision)</code></a> with each <code>DocumentRevision</code> in
 ascending generation order. For <code>DocumentRevision</code>s with the same generation,
 the order they are added in should not matter; a branch will be created
 automatically from the <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html#getParent--"><code>BasicDocumentRevision.getParent()</code></a>
 property of each <code>DocumentRevision</code>. This implies that if a <code>DocumentRevision</code>
 that is not the root of a tree (that is, it has a parent), the parent must
 be added first so the tree is constructed correctly.</p>

 <p>When a complete tree has been constructed, it's possible to work out
 things like the complete set of non-deleted leaf revisions (that is, the
 conflicted revisions for the document) and what is the current winning
 revision of the document.</p>

  <p><strong>Note: This class is not thread safe.</strong></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/cloudant/sync/datastore/Datastore.html#resolveConflictsForDocument-java.lang.String-com.cloudant.sync.datastore.ConflictResolver-"><code>Datastore.resolveConflictsForDocument(String, ConflictResolver)</code></a>, 
<a href="../../../../com/cloudant/sync/datastore/ConflictResolver.html" title="interface in com.cloudant.sync.datastore"><code>ConflictResolver</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</a></span></code>
<div class="block">A node in a document's revision tree history.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#DocumentRevisionTree--">DocumentRevisionTree</a></span>()</code>
<div class="block">Construct an empty tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#DocumentRevisionTree-com.cloudant.sync.datastore.BasicDocumentRevision-">DocumentRevisionTree</a></span>(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;documentRevision)</code>
<div class="block">Construct a tree with a single root.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#add-com.cloudant.sync.datastore.BasicDocumentRevision-">add</a></span>(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;documentRevision)</code>
<div class="block">Adds a new <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> to the document.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#bySequence-long-">bySequence</a></span>(long&nbsp;sequence)</code>
<div class="block">Returns a <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> from this <code>DocumentRevisionTree</code> with
 a particular sequence number.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#depth-long-">depth</a></span>(long&nbsp;sequence)</code>
<div class="block">Returns the distance a revision is down the branch it's on.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#getCurrentRevision--">getCurrentRevision</a></span>()</code>
<div class="block">Returns the <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> that is the current winning revision
 for this <code>DocumentRevisionTree</code>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#getDocId--">getDocId</a></span>()</code>
<div class="block">Returns the document ID</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#getPath-long-">getPath</a></span>(long&nbsp;sequence)</code>
<div class="block">Returns the path as a list of revision IDs from the revision with
 the given sequence number to the root of the tree containing the
 revision.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#getPathForNode-long-">getPathForNode</a></span>(long&nbsp;sequence)</code>
<div class="block">Returns the path (list of <code>DocumentRevision</code>s) from the revision with
 the given sequence number to the root of the tree containing the
 revision.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#hasConflicts--">hasConflicts</a></span>()</code>
<div class="block">Returns whether this document is conflicted.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafRevisionIds--">leafRevisionIds</a></span>()</code>
<div class="block">Returns the revision IDs for the leaf revisions of this document.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafRevisions--">leafRevisions</a></span>()</code>
<div class="block">Returns the leaf revisions</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafRevisions-boolean-">leafRevisions</a></span>(boolean&nbsp;excludeDeleted)</code>
<div class="block">Returns the leaf revisions</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafs--">leafs</a></span>()</code>
<div class="block">Returns a list of the <a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><code>DocumentRevisionTree.DocumentRevisionNode</code></a>s which are leaf revisions
 of the branches in this document</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#lookup-java.lang.String-java.lang.String-">lookup</a></span>(java.lang.String&nbsp;id,
      java.lang.String&nbsp;rev)</code>
<div class="block">Returns the <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> for a document ID and revision ID.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#lookupChildByRevId-com.cloudant.sync.datastore.BasicDocumentRevision-java.lang.String-">lookupChildByRevId</a></span>(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;parentNode,
                  java.lang.String&nbsp;childRevision)</code>
<div class="block">Returns the child with a given revision ID of a parent
 <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a>.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#root-long-">root</a></span>(long&nbsp;sequence)</code>
<div class="block">Returns the root revision of this document with a given sequence number.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.Long,<a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#roots--">roots</a></span>()</code>
<div class="block">Returns the root revisions of this document in a mapping of sequence
 number to <a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><code>DocumentRevisionTree.DocumentRevisionNode</code></a>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DocumentRevisionTree--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DocumentRevisionTree</h4>
<pre>public&nbsp;DocumentRevisionTree()</pre>
<div class="block"><p>Construct an empty tree.</p></div>
</li>
</ul>
<a name="DocumentRevisionTree-com.cloudant.sync.datastore.BasicDocumentRevision-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DocumentRevisionTree</h4>
<pre>public&nbsp;DocumentRevisionTree(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;documentRevision)</pre>
<div class="block"><p>Construct a tree with a single root.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documentRevision</code> - a root of the revision tree</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="add-com.cloudant.sync.datastore.BasicDocumentRevision-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;<a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree</a>&nbsp;add(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;documentRevision)</pre>
<div class="block"><p>Adds a new <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> to the document.</p>

 <p>The <code>DocumentRevision</code>'s parent, if there is one, must already be in
 the document tree.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documentRevision</code> - the <code>DocumentRevision</code> to add</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>DocumentRevisionTree</code> for method chaining</dd>
</dl>
</li>
</ul>
<a name="lookup-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookup</h4>
<pre>public&nbsp;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;lookup(java.lang.String&nbsp;id,
                                    java.lang.String&nbsp;rev)</pre>
<div class="block"><p>Returns the <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> for a document ID and revision ID.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - document ID</dd>
<dd><code>rev</code> - revision ID</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <code>DocumentRevision</code> for the document and revision ID</dd>
</dl>
</li>
</ul>
<a name="depth-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>depth</h4>
<pre>public&nbsp;int&nbsp;depth(long&nbsp;sequence)</pre>
<div class="block"><p>Returns the distance a revision is down the branch it's on.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sequence</code> - sequence number to identify the revision</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the distance down the branch for the sequence number, <code>-1</code>
      if the sequence number isn't present in the document.</dd>
</dl>
</li>
</ul>
<a name="lookupChildByRevId-com.cloudant.sync.datastore.BasicDocumentRevision-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookupChildByRevId</h4>
<pre>public&nbsp;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;lookupChildByRevId(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;parentNode,
                                                java.lang.String&nbsp;childRevision)</pre>
<div class="block"><p>Returns the child with a given revision ID of a parent
 <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>parentNode</code> - parent <code>DocumentRevision</code></dd>
<dd><code>childRevision</code> - revision to look for in child nodes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the child with a given revision ID of a <code>DocumentRevision</code>.</dd>
</dl>
</li>
</ul>
<a name="bySequence-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bySequence</h4>
<pre>public&nbsp;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;bySequence(long&nbsp;sequence)</pre>
<div class="block"><p>Returns a <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> from this <code>DocumentRevisionTree</code> with
 a particular sequence number.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sequence</code> - sequence number of the <code>DocumentRevision</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <code>DocumentRevision</code> with the given sequence number,
     null if no <code>DocumentRevision</code> has the given sequence number.</dd>
</dl>
</li>
</ul>
<a name="hasConflicts--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasConflicts</h4>
<pre>public&nbsp;boolean&nbsp;hasConflicts()</pre>
<div class="block"><p>Returns whether this document is conflicted.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if there is more than one branch terminated by an active
      leaf revision, otherwise false</dd>
</dl>
</li>
</ul>
<a name="roots--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>roots</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.Long,<a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</a>&gt;&nbsp;roots()</pre>
<div class="block"><p>Returns the root revisions of this document in a mapping of sequence
 number to <a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><code>DocumentRevisionTree.DocumentRevisionNode</code></a>.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the root revisions of this document in a map</dd>
</dl>
</li>
</ul>
<a name="root-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>root</h4>
<pre>public&nbsp;<a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</a>&nbsp;root(long&nbsp;sequence)</pre>
<div class="block"><p>Returns the root revision of this document with a given sequence number.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sequence</code> - a sequence number</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the root revision of this document with a given sequence number</dd>
</dl>
</li>
</ul>
<a name="leafs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leafs</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree.DocumentRevisionNode</a>&gt;&nbsp;leafs()</pre>
<div class="block"><p>Returns a list of the <a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><code>DocumentRevisionTree.DocumentRevisionNode</code></a>s which are leaf revisions
 of the branches in this document</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of leaf <code>DocumentRevisionNode</code>s</dd>
</dl>
</li>
</ul>
<a name="leafRevisionIds--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leafRevisionIds</h4>
<pre>public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;leafRevisionIds()</pre>
<div class="block"><p>Returns the revision IDs for the leaf revisions of this document.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the set of revision IDs for the leaf revisions of this document.</dd>
</dl>
</li>
</ul>
<a name="leafRevisions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leafRevisions</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&gt;&nbsp;leafRevisions()</pre>
<div class="block"><p>Returns the leaf revisions</p>

 <p>This is the same as calling
 <a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html#leafRevisions-boolean-"><code>leafRevisions(boolean)</code></a> with
 <code>false</code> as the parameter</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of <a href="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><code>DocumentRevision</code></a> objects.</dd>
</dl>
</li>
</ul>
<a name="leafRevisions-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leafRevisions</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&gt;&nbsp;leafRevisions(boolean&nbsp;excludeDeleted)</pre>
<div class="block"><p>Returns the leaf revisions</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>excludeDeleted</code> - if true, exclude deleted leaf revisions from list</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of <a href="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><code>DocumentRevision</code></a> objects.</dd>
</dl>
</li>
</ul>
<a name="getCurrentRevision--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentRevision</h4>
<pre>public&nbsp;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;getCurrentRevision()</pre>
<div class="block"><p>Returns the <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> that is the current winning revision
 for this <code>DocumentRevisionTree</code>.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore"><code>BasicDocumentRevision</code></a> that is the current winning revision
 for this <code>DocumentRevisionTree</code>.</dd>
</dl>
</li>
</ul>
<a name="getPathForNode-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPathForNode</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&gt;&nbsp;getPathForNode(long&nbsp;sequence)</pre>
<div class="block"><p>Returns the path (list of <code>DocumentRevision</code>s) from the revision with
 the given sequence number to the root of the tree containing the
 revision.</p>

 <p>The list of revisions is in order of appearance in the tree, where
 the first revision is the given <code>DocumentRevision</code> and the last revision
 is the root of the tree.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sequence</code> - sequence of the starting revision</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of <code>DocumentRevision</code>s from the revision with <code>sequence</code>
 to the root of the revision's tree.</dd>
</dl>
</li>
</ul>
<a name="getPath-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPath</h4>
<pre>public&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;getPath(long&nbsp;sequence)</pre>
<div class="block"><p>Returns the path as a list of revision IDs from the revision with
 the given sequence number to the root of the tree containing the
 revision.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sequence</code> - sequence of the starting revision</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of revision IDs from the starting revision to the root of
   that revision's tree.</dd>
</dl>
</li>
</ul>
<a name="getDocId--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getDocId</h4>
<pre>public&nbsp;java.lang.String&nbsp;getDocId()</pre>
<div class="block">Returns the document ID</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the document ID</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionBuilder.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.DocumentRevisionNode.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/cloudant/sync/datastore/DocumentRevisionTree.html" target="_top">Frames</a></li>
<li><a href="DocumentRevisionTree.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
