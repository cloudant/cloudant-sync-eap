<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_25) on Thu Jun 11 17:51:04 BST 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>DatastoreExtended (sync-android 0.12.0 API)</title>
<meta name="date" content="2015-06-11">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DatastoreExtended (sync-android 0.12.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":6,"i12":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/cloudant/sync/datastore/DatastoreException.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/cloudant/sync/datastore/DatastoreManager.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/cloudant/sync/datastore/DatastoreExtended.html" target="_top">Frames</a></li>
<li><a href="DatastoreExtended.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.cloudant.sync.datastore</div>
<h2 title="Interface DatastoreExtended" class="title">Interface DatastoreExtended</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore">Datastore</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">DatastoreExtended</span>
extends <a href="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore">Datastore</a></pre>
<div class="block"><p><code>DatastoreExtended</code> adds further, lesser-used methods to the
 Datastore interface.</p>

 <p>These methods are typically used by other packages extending the
 datastore's functionality. For example, the replication package uses these
 extended APIs to implement replication between local and remote
 CouchDB-replication-protocol compatible datastores.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.cloudant.sync.datastore.Datastore">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.cloudant.sync.datastore.<a href="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore">Datastore</a></h3>
<code><a href="../../../../com/cloudant/sync/datastore/Datastore.html#SEQUENCE_NUMBER_START">SEQUENCE_NUMBER_START</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#addAttachment-com.cloudant.sync.datastore.PreparedAttachment-com.cloudant.sync.datastore.BasicDocumentRevision-">addAttachment</a></span>(<a href="../../../../com/cloudant/sync/datastore/PreparedAttachment.html" title="class in com.cloudant.sync.datastore">PreparedAttachment</a>&nbsp;att,
             <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev)</code>
<div class="block">Add attachment to document revision without incrementing revision.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;? extends <a href="../../../../com/cloudant/sync/datastore/Attachment.html" title="class in com.cloudant.sync.datastore">Attachment</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#attachmentsForRevision-com.cloudant.sync.datastore.BasicDocumentRevision-">attachmentsForRevision</a></span>(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev)</code>
<div class="block">Returns all attachments for the revision.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#deleteLocalDocument-java.lang.String-">deleteLocalDocument</a></span>(java.lang.String&nbsp;documentId)</code>
<div class="block">Deletes a local document.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#forceInsert-com.cloudant.sync.datastore.BasicDocumentRevision-java.util.List-java.util.Map-java.util.Map-boolean-">forceInsert</a></span>(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev,
           java.util.List&lt;java.lang.String&gt;&nbsp;revisionHistory,
           java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;attachments,
           java.util.Map&lt;java.lang.String[],java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/PreparedAttachment.html" title="class in com.cloudant.sync.datastore">PreparedAttachment</a>&gt;&gt;&nbsp;preparedAttachments,
           boolean&nbsp;pullAttachmentsInline)</code>
<div class="block">Inserts a revision of a document with an existing revision ID and
 revision history.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#forceInsert-com.cloudant.sync.datastore.BasicDocumentRevision-java.lang.String...-">forceInsert</a></span>(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev,
           java.lang.String...&nbsp;revisionHistory)</code>
<div class="block">Inserts a revision of a document with an existing revision ID</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#getAllRevisionsOfDocument-java.lang.String-">getAllRevisionsOfDocument</a></span>(java.lang.String&nbsp;documentId)</code>
<div class="block">Returns <code>DocumentRevisionTree</code> of a document.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/Attachment.html" title="class in com.cloudant.sync.datastore">Attachment</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#getAttachment-com.cloudant.sync.datastore.BasicDocumentRevision-java.lang.String-">getAttachment</a></span>(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev,
             java.lang.String&nbsp;attachmentName)</code>
<div class="block">Returns attachment <code>attachmentName</code> for the revision.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#getDocumentCount--">getDocumentCount</a></span>()</code>
<div class="block">Returns the number of documents in the database, including deleted
 documents.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/LocalDocument.html" title="class in com.cloudant.sync.datastore">LocalDocument</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#getLocalDocument-java.lang.String-">getLocalDocument</a></span>(java.lang.String&nbsp;documentId)</code>
<div class="block">Returns the current winning revision of a local document.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#getPublicIdentifier--">getPublicIdentifier</a></span>()</code>
<div class="block">Returns the datastore's unique identifier.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/LocalDocument.html" title="class in com.cloudant.sync.datastore">LocalDocument</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#insertLocalDocument-java.lang.String-com.cloudant.sync.datastore.DocumentBody-">insertLocalDocument</a></span>(java.lang.String&nbsp;docId,
                   <a href="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</a>&nbsp;body)</code>
<div class="block">Inserts a local document with an ID and body.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/cloudant/sync/datastore/PreparedAttachment.html" title="class in com.cloudant.sync.datastore">PreparedAttachment</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#prepareAttachment-com.cloudant.sync.datastore.Attachment-">prepareAttachment</a></span>(<a href="../../../../com/cloudant/sync/datastore/Attachment.html" title="class in com.cloudant.sync.datastore">Attachment</a>&nbsp;att)</code>
<div class="block">Read attachment stream to a temporary location and calculate sha1,
 prior to being added to the datastore.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,java.util.Collection&lt;java.lang.String&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#revsDiff-com.google.common.collect.Multimap-">revsDiff</a></span>(com.google.common.collect.Multimap&lt;java.lang.String,java.lang.String&gt;&nbsp;revisions)</code>
<div class="block">Returns the subset of given the documentId/revisions that are not stored in the database.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.cloudant.sync.datastore.Datastore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.cloudant.sync.datastore.<a href="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore">Datastore</a></h3>
<code><a href="../../../../com/cloudant/sync/datastore/Datastore.html#changes-long-int-">changes</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#close--">close</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#compact--">compact</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#containsDocument-java.lang.String-">containsDocument</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#containsDocument-java.lang.String-java.lang.String-">containsDocument</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#createDocumentFromRevision-com.cloudant.sync.datastore.MutableDocumentRevision-">createDocumentFromRevision</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument-java.lang.String-">deleteDocument</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocumentFromRevision-com.cloudant.sync.datastore.BasicDocumentRevision-">deleteDocumentFromRevision</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#extensionDataFolder-java.lang.String-">extensionDataFolder</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getAllDocuments-int-int-boolean-">getAllDocuments</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getConflictedDocumentIds--">getConflictedDocumentIds</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getDatastoreName--">getDatastoreName</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument-java.lang.String-">getDocument</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument-java.lang.String-java.lang.String-">getDocument</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getDocumentsWithIds-java.util.List-">getDocumentsWithIds</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getEventBus--">getEventBus</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getKeyProvider--">getKeyProvider</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getLastSequence--">getLastSequence</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#getPossibleAncestorRevisionIDs-java.lang.String-java.lang.String-int-">getPossibleAncestorRevisionIDs</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#resolveConflictsForDocument-java.lang.String-com.cloudant.sync.datastore.ConflictResolver-">resolveConflictsForDocument</a>, <a href="../../../../com/cloudant/sync/datastore/Datastore.html#updateDocumentFromRevision-com.cloudant.sync.datastore.MutableDocumentRevision-">updateDocumentFromRevision</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="insertLocalDocument-java.lang.String-com.cloudant.sync.datastore.DocumentBody-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertLocalDocument</h4>
<pre><a href="../../../../com/cloudant/sync/datastore/LocalDocument.html" title="class in com.cloudant.sync.datastore">LocalDocument</a>&nbsp;insertLocalDocument(java.lang.String&nbsp;docId,
                                  <a href="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</a>&nbsp;body)
                           throws <a href="../../../../com/cloudant/sync/datastore/DocumentException.html" title="class in com.cloudant.sync.datastore">DocumentException</a></pre>
<div class="block"><p>Inserts a local document with an ID and body. Replacing the current local document of the
 same id if one is present. </p>

 <p>Local documents are not replicated between datastores.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>docId</code> - The document id for the document</dd>
<dd><code>body</code> - JSON body for the document</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>DocumentRevision</code> of the newly created document</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/DocumentException.html" title="class in com.cloudant.sync.datastore">DocumentException</a></code></dd>
</dl>
</li>
</ul>
<a name="getLocalDocument-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalDocument</h4>
<pre><a href="../../../../com/cloudant/sync/datastore/LocalDocument.html" title="class in com.cloudant.sync.datastore">LocalDocument</a>&nbsp;getLocalDocument(java.lang.String&nbsp;documentId)
                        throws <a href="../../../../com/cloudant/sync/datastore/DocumentNotFoundException.html" title="class in com.cloudant.sync.datastore">DocumentNotFoundException</a></pre>
<div class="block"><p>Returns the current winning revision of a local document.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documentId</code> - id of the local document</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>LocalDocument</code> of the document</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/DocumentNotFoundException.html" title="class in com.cloudant.sync.datastore">DocumentNotFoundException</a></code></dd>
</dl>
</li>
</ul>
<a name="deleteLocalDocument-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteLocalDocument</h4>
<pre>void&nbsp;deleteLocalDocument(java.lang.String&nbsp;documentId)
                  throws <a href="../../../../com/cloudant/sync/datastore/DocumentNotFoundException.html" title="class in com.cloudant.sync.datastore">DocumentNotFoundException</a></pre>
<div class="block"><p>Deletes a local document.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documentId</code> - documentId of the document to be deleted</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/DocumentNotFoundException.html" title="class in com.cloudant.sync.datastore">DocumentNotFoundException</a></code> - if the document ID doesn't exist</dd>
</dl>
</li>
</ul>
<a name="getAllRevisionsOfDocument-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllRevisionsOfDocument</h4>
<pre><a href="../../../../com/cloudant/sync/datastore/DocumentRevisionTree.html" title="class in com.cloudant.sync.datastore">DocumentRevisionTree</a>&nbsp;getAllRevisionsOfDocument(java.lang.String&nbsp;documentId)</pre>
<div class="block"><p>Returns <code>DocumentRevisionTree</code> of a document.</p>

 <p>The tree contains the complete revision history of the document,
 including branches for conflicts and deleted leaves.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documentId</code> - id of the document</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>DocumentRevisionTree</code> of the specified document</dd>
</dl>
</li>
</ul>
<a name="forceInsert-com.cloudant.sync.datastore.BasicDocumentRevision-java.util.List-java.util.Map-java.util.Map-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceInsert</h4>
<pre>void&nbsp;forceInsert(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev,
                 java.util.List&lt;java.lang.String&gt;&nbsp;revisionHistory,
                 java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;attachments,
                 java.util.Map&lt;java.lang.String[],java.util.List&lt;<a href="../../../../com/cloudant/sync/datastore/PreparedAttachment.html" title="class in com.cloudant.sync.datastore">PreparedAttachment</a>&gt;&gt;&nbsp;preparedAttachments,
                 boolean&nbsp;pullAttachmentsInline)
          throws <a href="../../../../com/cloudant/sync/datastore/DocumentException.html" title="class in com.cloudant.sync.datastore">DocumentException</a></pre>
<div class="block"><p>Inserts a revision of a document with an existing revision ID and
 revision history.</p>

 <p>This method inserts a revision into the document tree for an existing
 document. It checks every revision in the revision history, and adds
 <code>rev</code> is it isn't already present in the datastore.</p>

 <p>Here is an example of revHistory:</p>

 <pre>
 [
     "1-421ff3d58df47ea6c5e83ca65efb2fa9",
     "2-74e0572530e3b4cd4776616d2f591a96",
     "3-d8e1fb8127d8dd732d9ae46a6c38ae3c",
     "4-47d7102726fc89914431cb217ab7bace"
 ]
 </pre>

 <p>This method should only be called by the replicator. It's designed
 to allow revisions from different datastores to be added to this
 datastore during the replication process, when we wouldn't want to
 create new revision IDs (as if we did, we wouldn't know that we already
 had a particular revision from a previous replication).</p>

 <p>The <code>revisionHistory</code> is required so that we know whether
 the <code>rev</code> is part of the existing document tree, so we can see
 whether it's a conflict which needs to be grafted to the tree or
 whether it's a newer version of the same branch we already have.</p>

 <p>If the document was successfully inserted, a
 <a href="../../../../com/cloudant/sync/notifications/DocumentCreated.html" title="class in com.cloudant.sync.notifications"><code>DocumentCreated</code></a>,
 <a href="../../../../com/cloudant/sync/notifications/DocumentModified.html" title="class in com.cloudant.sync.notifications"><code>DocumentModified</code></a>, or
 <a href="../../../../com/cloudant/sync/notifications/DocumentDeleted.html" title="class in com.cloudant.sync.notifications"><code>DocumentDeleted</code></a>
 event is posted on the event bus. The event will depend on the nature
 of the update made.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rev</code> - A <code>DocumentRevision</code> containing the information for a revision
            from a remote datastore.</dd>
<dd><code>revisionHistory</code> - The history of the revision being inserted,
                        including the rev ID of <code>rev</code>. This list
                        needs to be sorted in ascending order.</dd>
<dd><code>preparedAttachments</code> - Attachments that have already been prepared, this is a
                            Map of String[docId,revId], list of attachments</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/DocumentException.html" title="class in com.cloudant.sync.datastore">DocumentException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/cloudant/sync/datastore/Datastore.html#getEventBus--"><code>Datastore.getEventBus()</code></a></dd>
</dl>
</li>
</ul>
<a name="forceInsert-com.cloudant.sync.datastore.BasicDocumentRevision-java.lang.String...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceInsert</h4>
<pre>void&nbsp;forceInsert(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev,
                 java.lang.String...&nbsp;revisionHistory)
          throws <a href="../../../../com/cloudant/sync/datastore/DocumentException.html" title="class in com.cloudant.sync.datastore">DocumentException</a></pre>
<div class="block"><p>Inserts a revision of a document with an existing revision ID</p>

 <p>Equivalent to:</p>

 <code>
    forceInsert(rev, Arrays.asList(revisionHistory));
 </code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rev</code> - </dd>
<dd><code>revisionHistory</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/DocumentException.html" title="class in com.cloudant.sync.datastore">DocumentException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/cloudant/sync/datastore/DatastoreExtended.html#forceInsert-com.cloudant.sync.datastore.BasicDocumentRevision-java.util.List-java.util.Map-java.util.Map-boolean-"><code>forceInsert(BasicDocumentRevision, java.util.List,java.util.Map, java.util.Map, boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="getPublicIdentifier--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPublicIdentifier</h4>
<pre>java.lang.String&nbsp;getPublicIdentifier()
                              throws <a href="../../../../com/cloudant/sync/datastore/DatastoreException.html" title="class in com.cloudant.sync.datastore">DatastoreException</a></pre>
<div class="block"><p>Returns the datastore's unique identifier.</p>

 <p>This is used for the checkpoint document in a remote datastore
 during replication.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a unique identifier for the datastore.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/DatastoreException.html" title="class in com.cloudant.sync.datastore">DatastoreException</a></code></dd>
</dl>
</li>
</ul>
<a name="getDocumentCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDocumentCount</h4>
<pre>int&nbsp;getDocumentCount()</pre>
<div class="block"><p>Returns the number of documents in the database, including deleted
 documents.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/Datastore.html#getDocumentCount--">getDocumentCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore">Datastore</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>document count, including deleted docs.</dd>
</dl>
</li>
</ul>
<a name="revsDiff-com.google.common.collect.Multimap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>revsDiff</h4>
<pre>java.util.Map&lt;java.lang.String,java.util.Collection&lt;java.lang.String&gt;&gt;&nbsp;revsDiff(com.google.common.collect.Multimap&lt;java.lang.String,java.lang.String&gt;&nbsp;revisions)</pre>
<div class="block">Returns the subset of given the documentId/revisions that are not stored in the database.

 The input revisions is a map, whose key is document id, and value is a list of revisions.
 An example input could be (in json format):

 { "03ee06461a12f3c288bb865b22000170":
     [
       "1-b2e54331db828310f3c772d6e042ac9c",
       "2-3a24009a9525bde9e4bfa8a99046b00d"
     ],
   "82e04f650661c9bdb88c57e044000a4b":
     [
       "3-bb39f8c740c6ffb8614c7031b46ac162"
     ]
 }

 The output is in same format.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://wiki.apache.org/couchdb/HttpPostRevsDiff">HttpPostRevsDiff documentation</a></dd>
</dl>
</li>
</ul>
<a name="prepareAttachment-com.cloudant.sync.datastore.Attachment-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareAttachment</h4>
<pre><a href="../../../../com/cloudant/sync/datastore/PreparedAttachment.html" title="class in com.cloudant.sync.datastore">PreparedAttachment</a>&nbsp;prepareAttachment(<a href="../../../../com/cloudant/sync/datastore/Attachment.html" title="class in com.cloudant.sync.datastore">Attachment</a>&nbsp;att)
                              throws <a href="../../../../com/cloudant/sync/datastore/AttachmentException.html" title="class in com.cloudant.sync.datastore">AttachmentException</a></pre>
<div class="block">Read attachment stream to a temporary location and calculate sha1,
 prior to being added to the datastore.

 Used by replicator when receiving new/updated attachments</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>att</code> - Attachment to be prepared, providing data either from a file or a stream</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A prepared attachment, ready to be added to the datastore</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/AttachmentException.html" title="class in com.cloudant.sync.datastore">AttachmentException</a></code></dd>
</dl>
</li>
</ul>
<a name="addAttachment-com.cloudant.sync.datastore.PreparedAttachment-com.cloudant.sync.datastore.BasicDocumentRevision-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addAttachment</h4>
<pre>void&nbsp;addAttachment(<a href="../../../../com/cloudant/sync/datastore/PreparedAttachment.html" title="class in com.cloudant.sync.datastore">PreparedAttachment</a>&nbsp;att,
                   <a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev)
            throws <a href="../../../../com/cloudant/sync/datastore/AttachmentException.html" title="class in com.cloudant.sync.datastore">AttachmentException</a></pre>
<div class="block">Add attachment to document revision without incrementing revision.

 Used by replicator when receiving new/updated attachments</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>att</code> - The attachment to add</dd>
<dd><code>rev</code> - The DocumentRevision to add the attachment to</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/AttachmentException.html" title="class in com.cloudant.sync.datastore">AttachmentException</a></code></dd>
</dl>
</li>
</ul>
<a name="getAttachment-com.cloudant.sync.datastore.BasicDocumentRevision-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAttachment</h4>
<pre><a href="../../../../com/cloudant/sync/datastore/Attachment.html" title="class in com.cloudant.sync.datastore">Attachment</a>&nbsp;getAttachment(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev,
                         java.lang.String&nbsp;attachmentName)</pre>
<div class="block"><p>Returns attachment <code>attachmentName</code> for the revision.</p>

 <p>Used by replicator when pushing attachments</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>Attachment</code> or null if there is no attachment with that name.</dd>
</dl>
</li>
</ul>
<a name="attachmentsForRevision-com.cloudant.sync.datastore.BasicDocumentRevision-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>attachmentsForRevision</h4>
<pre>java.util.List&lt;? extends <a href="../../../../com/cloudant/sync/datastore/Attachment.html" title="class in com.cloudant.sync.datastore">Attachment</a>&gt;&nbsp;attachmentsForRevision(<a href="../../../../com/cloudant/sync/datastore/BasicDocumentRevision.html" title="class in com.cloudant.sync.datastore">BasicDocumentRevision</a>&nbsp;rev)
                                                     throws <a href="../../../../com/cloudant/sync/datastore/AttachmentException.html" title="class in com.cloudant.sync.datastore">AttachmentException</a></pre>
<div class="block"><p>Returns all attachments for the revision.</p>

 <p>Used by replicator when pulling attachments</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List of <code>Attachment</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/cloudant/sync/datastore/AttachmentException.html" title="class in com.cloudant.sync.datastore">AttachmentException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/cloudant/sync/datastore/DatastoreException.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/cloudant/sync/datastore/DatastoreManager.html" title="class in com.cloudant.sync.datastore"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/cloudant/sync/datastore/DatastoreExtended.html" target="_top">Frames</a></li>
<li><a href="DatastoreExtended.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
