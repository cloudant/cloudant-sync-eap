<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Fri Nov 21 10:29:08 GMT 2014 -->
<TITLE>
DatastoreManager (sync-android 0.9.1 API)
</TITLE>

<META NAME="date" CONTENT="2014-11-21">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DatastoreManager (sync-android 0.9.1 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/DatastoreManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DatastoreManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.cloudant.sync.datastore</FONT>
<BR>
Class DatastoreManager</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>com.cloudant.sync.datastore.DatastoreManager</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>DatastoreManager</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<p>Manages a set of <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore"><CODE>Datastore</CODE></A> objects, with their underlying disk
 storage residing in a given directory.</p>

 <p>In general, a directory used for storing datastores -- that is, managed
 by this manager -- shouldn't be used for storing other data. The manager
 object assumes all data within is managed by itself, so adding other files
 to the directory may cause them to be deleted.</p>

 <p>A datastore's on-disk representation is a single file containing
 all its data. In future, there may be other files and folders per
 datastore.</p>
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#DatastoreManager(java.io.File)">DatastoreManager</A></B>(java.io.File&nbsp;directoryPath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a <code>DatastoreManager</code> to manage a directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#DatastoreManager(java.lang.String)">DatastoreManager</A></B>(java.lang.String&nbsp;directoryPath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a <code>DatastoreManager</code> to manage a directory.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#deleteDatastore(java.lang.String)">deleteDatastore</A></B>(java.lang.String&nbsp;dbName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes a datastore's files from disk.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;com.google.common.eventbus.EventBus</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#getEventBus()">getEventBus</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the EventBus which this DatastoreManager posts
 <A HREF="../../../../com/cloudant/sync/notifications/DatabaseModified.html" title="class in com.cloudant.sync.notifications"><CODE>Database Notification Events</CODE></A> to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#getPath()">getPath</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the path to the directory this object manages.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#onDatabaseClosed(com.cloudant.sync.notifications.DatabaseClosed)">onDatabaseClosed</A></B>(<A HREF="../../../../com/cloudant/sync/notifications/DatabaseClosed.html" title="class in com.cloudant.sync.notifications">DatabaseClosed</A>&nbsp;databaseClosed)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore">Datastore</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#openDatastore(java.lang.String)">openDatastore</A></B>(java.lang.String&nbsp;dbName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Opens a datastore.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DatastoreManager(java.lang.String)"><!-- --></A><H3>
DatastoreManager</H3>
<PRE>
public <B>DatastoreManager</B>(java.lang.String&nbsp;directoryPath)</PRE>
<DL>
<DD><p>Constructs a <code>DatastoreManager</code> to manage a directory.</p>

 <p>Datastores are created within the <code>directoryPath</code> directory.
 In general, this folder should be under the control of, and only used
 by, a single <code>DatastoreManager</code> object at any time.</p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>directoryPath</CODE> - root directory to manage<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#DatastoreManager(java.io.File)"><CODE>DatastoreManager(java.io.File)</CODE></A></DL>
</DL>
<HR>

<A NAME="DatastoreManager(java.io.File)"><!-- --></A><H3>
DatastoreManager</H3>
<PRE>
public <B>DatastoreManager</B>(java.io.File&nbsp;directoryPath)</PRE>
<DL>
<DD><p>Constructs a <code>DatastoreManager</code> to manage a directory.</p>

 <p>Datastores are created within the <code>directoryPath</code> directory.
 In general, this folder should be under the control of, and only used
 by, a single <code>DatastoreManager</code> object at any time.</p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>directoryPath</CODE> - root directory to manage
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the <code>directoryPath</code> is not a
          directory or isn't writable.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getPath()"><!-- --></A><H3>
getPath</H3>
<PRE>
public java.lang.String <B>getPath</B>()</PRE>
<DL>
<DD><p>Returns the path to the directory this object manages.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the absolute path to the directory this object manages.</DL>
</DD>
</DL>
<HR>

<A NAME="openDatastore(java.lang.String)"><!-- --></A><H3>
openDatastore</H3>
<PRE>
public <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore">Datastore</A> <B>openDatastore</B>(java.lang.String&nbsp;dbName)</PRE>
<DL>
<DD><p>Opens a datastore.</p>

 <p>This method finds the appropriate datastore file for a
 datastore, then initialises a <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore"><CODE>Datastore</CODE></A> object connected
 to that underlying storage file.</p>

 <p>If the datastore was successfully created and opened, a 
 <A HREF="../../../../com/cloudant/sync/notifications/DatabaseOpened.html" title="class in com.cloudant.sync.notifications"><CODE>DatabaseOpened</CODE></A>
 event is posted on the event bus.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dbName</CODE> - name of datastore to open
<DT><B>Returns:</B><DD><code>Datastore</code> with the given name<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#getEventBus()"><CODE>getEventBus()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="deleteDatastore(java.lang.String)"><!-- --></A><H3>
deleteDatastore</H3>
<PRE>
public void <B>deleteDatastore</B>(java.lang.String&nbsp;dbName)
                     throws java.io.IOException</PRE>
<DL>
<DD><p>Deletes a datastore's files from disk.</p>

 <p>This operation deletes a datastore's files from disk. It is therefore
 a not undo-able. To confirm, this only deletes local data; data
 replicated to remote databases is not affected.</p>

 <p>Any <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html" title="interface in com.cloudant.sync.datastore"><CODE>Datastore</CODE></A> objects referring to the deleted files will be
 in an unknown state. Therefore, they should be disposed of prior to
 deleting the data. Currently, no checks for open datastores are carried
 out before attempting the delete.</p>

 <p>If the datastore was successfully deleted, a 
 <A HREF="../../../../com/cloudant/sync/notifications/DatabaseDeleted.html" title="class in com.cloudant.sync.notifications"><CODE>DatabaseDeleted</CODE></A> 
 event is posted on the event bus.</p>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if the datastore doesn't exist on disk or there is
      a problem deleting the files.<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/DatastoreManager.html#getEventBus()"><CODE>getEventBus()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getEventBus()"><!-- --></A><H3>
getEventBus</H3>
<PRE>
public com.google.common.eventbus.EventBus <B>getEventBus</B>()</PRE>
<DL>
<DD><p>Returns the EventBus which this DatastoreManager posts
 <A HREF="../../../../com/cloudant/sync/notifications/DatabaseModified.html" title="class in com.cloudant.sync.notifications"><CODE>Database Notification Events</CODE></A> to.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the DatastoreManager's EventBus<DT><B>See Also:</B><DD><a href="https://code.google.com/p/guava-libraries/wiki/EventBusExplained">Google Guava EventBus documentation</a></DL>
</DD>
</DL>
<HR>

<A NAME="onDatabaseClosed(com.cloudant.sync.notifications.DatabaseClosed)"><!-- --></A><H3>
onDatabaseClosed</H3>
<PRE>
public void <B>onDatabaseClosed</B>(<A HREF="../../../../com/cloudant/sync/notifications/DatabaseClosed.html" title="class in com.cloudant.sync.notifications">DatabaseClosed</A>&nbsp;databaseClosed)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/DatastoreManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DatastoreManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
