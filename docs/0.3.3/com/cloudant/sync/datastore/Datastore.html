<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Mon Mar 17 15:09:39 GMT 2014 -->
<TITLE>
Datastore (cloudant-sync-datastore-android 0.3.3 API)
</TITLE>

<META NAME="date" CONTENT="2014-03-17">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Datastore (cloudant-sync-datastore-android 0.3.3 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatabaseNotCreatedException.html" title="class in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/Datastore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Datastore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.cloudant.sync.datastore</FONT>
<BR>
Interface Datastore</H2>
<DL>
<DT><B>All Known Subinterfaces:</B> <DD><A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore">DatastoreExtended</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>Datastore</B></DL>
</PRE>

<P>
<p>The Datastore is the core interaction point for create, delete and update
 operations (CRUD) for within Cloudant Sync.</p>

 <p>The Datastore can be viewed as a pool of heterogeneous JSON documents. One
 datastore can hold many different types of document, unlike tables within a
 relational model. The datastore provides hooks, particularly in the
 <A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><CODE>DatastoreExtended</CODE></A> interface, which allow for various querying models
 to be built on top of its simpler key-value model.</p>

 <p>Each document consists of a set of revisions, hence most methods within
 this class operating on <A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A> objects, which carry both a
 document ID and a revision ID. This forms the basis of the MVCC data model,
 used to ensure safe peer-to-peer replication is possible.</p>

 <p>Each document is formed of a tree of revisions. Replication can create
 branches in this tree when changes have been made in two or more places to
 the same document in-between replications. MVCC exposes these branches as
 conflicted documents. These conflicts should be resolved by user-code, by
 marking all but one of the leaf nodes of the branches as "deleted", using
 the <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)"><CODE>deleteDocument(String, String)</CODE></A> method. When the
 datastore is next replicated with a remote datastore, this fix will be
 propagated, thereby resolving the conflicted document across the set of
 peers.</p>

 <p><strong>WARNING:</strong> conflict resolution is coming in the next
 release, where we'll be adding methods to:</p>

 <ul>
     <li>Get the IDs of all conflicted documents within the datastore.</li>
     <li>Get a list of all current revisions for a given document, so they
     can be merged to resolve the conflict.</li>
 </ul>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><CODE>DatastoreExtended</CODE></A>, 
<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore"><CODE>DocumentRevision</CODE></A></DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#SEQUENCE_NUMBER_START">SEQUENCE_NUMBER_START</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The sequence number of the datastore when no updates have been made,
 -1L.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/Changes.html" title="class in com.cloudant.sync.datastore">Changes</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#changes(long, int)">changes</A></B>(long&nbsp;since,
        int&nbsp;limit)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a list of changed documents, from <code>since</code> to
 <code>since + limit</code>, inclusive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the datastore</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#containsDocument(java.lang.String)">containsDocument</A></B>(java.lang.String&nbsp;documentId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns whether this datastore contains any revisions of a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#containsDocument(java.lang.String, java.lang.String)">containsDocument</A></B>(java.lang.String&nbsp;documentId,
                 java.lang.String&nbsp;revisionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns whether this datastore contains a particular revision of
 a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#createDocument(com.cloudant.sync.datastore.DocumentBody)">createDocument</A></B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</A>&nbsp;body)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a new document with an auto-generated ID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#createDocument(java.lang.String, com.cloudant.sync.datastore.DocumentBody)">createDocument</A></B>(java.lang.String&nbsp;documentId,
               <A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</A>&nbsp;body)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a new document with an ID and body.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)">deleteDocument</A></B>(java.lang.String&nbsp;documentId,
               java.lang.String&nbsp;revisionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes a document from the datastore.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#extensionDataFolder(java.lang.String)">extensionDataFolder</A></B>(java.lang.String&nbsp;extensionName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the directory for specified extensionName</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getAllDocuments(int, int, boolean)">getAllDocuments</A></B>(int&nbsp;offset,
                int&nbsp;limit,
                boolean&nbsp;descending)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enumerates the current winning revision for all documents in the
 datastore.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Iterator&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getConflictedDocumentIds()">getConflictedDocumentIds</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return <code>@Iterable&lt;String&gt;</code> over ids to all the Documents with
 conflicted revisions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDatastoreName()">getDatastoreName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the name of this datastore.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument(java.lang.String)">getDocument</A></B>(java.lang.String&nbsp;documentId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current winning revision of a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument(java.lang.String, java.lang.String)">getDocument</A></B>(java.lang.String&nbsp;documentId,
            java.lang.String&nbsp;revisionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves a given revision of a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocumentCount()">getDocumentCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the number of documents in the datastore</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocumentsWithIds(java.util.List)">getDocumentsWithIds</A></B>(java.util.List&lt;java.lang.String&gt;&nbsp;documentIds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current winning revisions for a set of documents.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;com.google.common.eventbus.EventBus</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getEventBus()">getEventBus</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the EventBus which this Datastore posts
 <A HREF="../../../../com/cloudant/sync/notifications/DocumentModified.html" title="class in com.cloudant.sync.notifications"><CODE>Document Notification Events</CODE></A> to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getLastSequence()">getLastSequence</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the datastore's current sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#resolveConflictsForDocument(java.lang.String, com.cloudant.sync.datastore.ConflictResolver)">resolveConflictsForDocument</A></B>(java.lang.String&nbsp;docId,
                            <A HREF="../../../../com/cloudant/sync/datastore/ConflictResolver.html" title="interface in com.cloudant.sync.datastore">ConflictResolver</A>&nbsp;resolver)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Resolve conflicts for specified Document using the
 given <code>ConflictResolver</code></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#updateDocument(java.lang.String, java.lang.String, com.cloudant.sync.datastore.DocumentBody)">updateDocument</A></B>(java.lang.String&nbsp;documentId,
               java.lang.String&nbsp;prevRevisionId,
               <A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</A>&nbsp;body)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates a document that exists in the datastore with a new revision.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="SEQUENCE_NUMBER_START"><!-- --></A><H3>
SEQUENCE_NUMBER_START</H3>
<PRE>
static final long <B>SEQUENCE_NUMBER_START</B></PRE>
<DL>
<DD>The sequence number of the datastore when no updates have been made,
 -1L.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.cloudant.sync.datastore.Datastore.SEQUENCE_NUMBER_START">Constant Field Values</A></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getDatastoreName()"><!-- --></A><H3>
getDatastoreName</H3>
<PRE>
java.lang.String <B>getDatastoreName</B>()</PRE>
<DL>
<DD><p>Returns the name of this datastore.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the name of this datastore</DL>
</DD>
</DL>
<HR>

<A NAME="createDocument(java.lang.String, com.cloudant.sync.datastore.DocumentBody)"><!-- --></A><H3>
createDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>createDocument</B>(java.lang.String&nbsp;documentId,
                                <A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</A>&nbsp;body)</PRE>
<DL>
<DD><p>Adds a new document with an ID and body.</p>

 <p>If the document was successfully created, a 
 <A HREF="../../../../com/cloudant/sync/notifications/DocumentCreated.html" title="class in com.cloudant.sync.notifications"><CODE>DocumentCreated</CODE></A> 
 event is posted on the event bus.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - id for the document<DD><CODE>body</CODE> - JSON body for the document
<DT><B>Returns:</B><DD><code>DocumentRevision</code> of the newly created document<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getEventBus()"><CODE>getEventBus()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="createDocument(com.cloudant.sync.datastore.DocumentBody)"><!-- --></A><H3>
createDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>createDocument</B>(<A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</A>&nbsp;body)</PRE>
<DL>
<DD><p>Adds a new document with an auto-generated ID.</p>

 <p>The document's ID will be auto-generated, and can be found by
 inspecting the returned <code>DocumentRevision</code>.</p>

 <p>If the document was successfully created, a 
 <A HREF="../../../../com/cloudant/sync/notifications/DocumentCreated.html" title="class in com.cloudant.sync.notifications"><CODE>DocumentCreated</CODE></A> 
 event is posted on the event bus.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>body</CODE> - JSON body for the document
<DT><B>Returns:</B><DD><code>DocumentRevision</code> of the newly created document<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getEventBus()"><CODE>getEventBus()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getDocument(java.lang.String)"><!-- --></A><H3>
getDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>getDocument</B>(java.lang.String&nbsp;documentId)</PRE>
<DL>
<DD><p>Returns the current winning revision of a document.</p>

 <p>Previously deleted documents can be retrieved
 (via tombstones, see <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)"><CODE>deleteDocument(String, String)</CODE></A>)
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of document to retrieve.
<DT><B>Returns:</B><DD><code>DocumentRevision</code> of the document or null if it doesn't exist.</DL>
</DD>
</DL>
<HR>

<A NAME="getDocument(java.lang.String, java.lang.String)"><!-- --></A><H3>
getDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>getDocument</B>(java.lang.String&nbsp;documentId,
                             java.lang.String&nbsp;revisionId)</PRE>
<DL>
<DD><p>Retrieves a given revision of a document.</p>

 <p>This method gets the revision of a document with a given ID. As the
 datastore prunes the content of old revisions to conserve space, this
 revision may contain the metadata but not content of the revision.</p>

 <p>Previously deleted documents can be retrieved
 (via tombstones, see <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)"><CODE>deleteDocument(String, String)</CODE></A>)
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of the document<DD><CODE>revisionId</CODE> - Revision of the document
<DT><B>Returns:</B><DD><code>DocumentRevision</code> of the document or null if it doesn't exist.</DL>
</DD>
</DL>
<HR>

<A NAME="containsDocument(java.lang.String, java.lang.String)"><!-- --></A><H3>
containsDocument</H3>
<PRE>
boolean <B>containsDocument</B>(java.lang.String&nbsp;documentId,
                         java.lang.String&nbsp;revisionId)</PRE>
<DL>
<DD><p>Returns whether this datastore contains a particular revision of
 a document.</p>

 <p><code>true</code> will still be returned if the document is deleted.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - id of the document<DD><CODE>revisionId</CODE> - revision of the document
<DT><B>Returns:</B><DD><code>true</code> if specified document's particular revision exists
         in the datastore, <code>false</code> otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="containsDocument(java.lang.String)"><!-- --></A><H3>
containsDocument</H3>
<PRE>
boolean <B>containsDocument</B>(java.lang.String&nbsp;documentId)</PRE>
<DL>
<DD><p>Returns whether this datastore contains any revisions of a document.
 </p>

 <p><code>true</code> will still be returned if the document is deleted.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - id of the document
<DT><B>Returns:</B><DD><code>true</code> if specified document exists
         in the datastore, <code>false</code> otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="getAllDocuments(int, int, boolean)"><!-- --></A><H3>
getAllDocuments</H3>
<PRE>
java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt; <B>getAllDocuments</B>(int&nbsp;offset,
                                                 int&nbsp;limit,
                                                 boolean&nbsp;descending)</PRE>
<DL>
<DD><p>Enumerates the current winning revision for all documents in the
 datastore.</p>

 <p>Logically, this method takes all the documents in either ascending
 or descending order, skips all documents up to <code>offset</code> then
 returns up to <code>limit</code> document revisions, stopping either
 at <code>limit</code> or when the list of document is exhausted.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>offset</CODE> - start position<DD><CODE>limit</CODE> - maximum number of documents to return<DD><CODE>descending</CODE> - whether the documents are read in ascending or
                   descending order.
<DT><B>Returns:</B><DD>list of <code>DBObjects</code>, maximum length <code>limit</code>.</DL>
</DD>
</DL>
<HR>

<A NAME="getDocumentsWithIds(java.util.List)"><!-- --></A><H3>
getDocumentsWithIds</H3>
<PRE>
java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A>&gt; <B>getDocumentsWithIds</B>(java.util.List&lt;java.lang.String&gt;&nbsp;documentIds)</PRE>
<DL>
<DD><p>Returns the current winning revisions for a set of documents.</p>

 <p>If the <code>documentIds</code> list contains document IDs not present
 in the datastore, they will be skipped and there will be no entry for
 them in the returned list.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentIds</CODE> - list of document id
<DT><B>Returns:</B><DD>list of <code>DocumentRevision</code> objects.</DL>
</DD>
</DL>
<HR>

<A NAME="updateDocument(java.lang.String, java.lang.String, com.cloudant.sync.datastore.DocumentBody)"><!-- --></A><H3>
updateDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DocumentRevision.html" title="interface in com.cloudant.sync.datastore">DocumentRevision</A> <B>updateDocument</B>(java.lang.String&nbsp;documentId,
                                java.lang.String&nbsp;prevRevisionId,
                                <A HREF="../../../../com/cloudant/sync/datastore/DocumentBody.html" title="interface in com.cloudant.sync.datastore">DocumentBody</A>&nbsp;body)
                                throws <A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></PRE>
<DL>
<DD><p>Updates a document that exists in the datastore with a new revision.
 </p>

 <p>The <code>prevRevisionId</code> must match the current winning revision
 for the document.</p>

 <p>If the document was successfully updated, a 
 <A HREF="../../../../com/cloudant/sync/notifications/DocumentUpdated.html" title="class in com.cloudant.sync.notifications"><CODE>DocumentUpdated</CODE></A> 
 event is posted on the event bus.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of the document<DD><CODE>prevRevisionId</CODE> - revision id of the document's current winning
                       revision<DD><CODE>body</CODE> - body of the new revision
<DT><B>Returns:</B><DD>@{code DocumentRevision} for the updated revision
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></CODE> - if the <code>prevRevisionId</code> is incorrect.<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getEventBus()"><CODE>getEventBus()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="deleteDocument(java.lang.String, java.lang.String)"><!-- --></A><H3>
deleteDocument</H3>
<PRE>
void <B>deleteDocument</B>(java.lang.String&nbsp;documentId,
                    java.lang.String&nbsp;revisionId)
                    throws <A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></PRE>
<DL>
<DD><p>Deletes a document from the datastore.</p>

 <p>This operation leaves a "tombstone" for the deleted document, so that
 future replication operations can successfully replicate the deletion.
 </p>

 <p>If the document was successfully deleted, a 
 <A HREF="../../../../com/cloudant/sync/notifications/DocumentDeleted.html" title="class in com.cloudant.sync.notifications"><CODE>DocumentDeleted</CODE></A> 
 event is posted on the event bus.</p>

 <p>If the input revision is already deleted, nothing will be changed. </p>

 <p>This operation also allows to delete any non-deleted leaf revision of
 the given document. It adds a "deleted" revision of the branch specified
 the given revision. This is mainly useful for resolving conflicts.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of the document to delete.<DD><CODE>revisionId</CODE> - revision id of the document's current winning revision
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></CODE> - if the revisionId is not the current revision<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getEventBus()"><CODE>getEventBus()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getLastSequence()"><!-- --></A><H3>
getLastSequence</H3>
<PRE>
long <B>getLastSequence</B>()</PRE>
<DL>
<DD><p>Retrieves the datastore's current sequence number.</p>

 <p>The datastore's sequence number is incremented every time the
 content of the datastore is changed. Each document revision within the
 datastore has an associated sequence number, describing when the change
 took place.</p>

 <p>The sequence number is particularly useful to find out the changes
 to the database since a given time. For example, replication uses the
 sequence number so only the changes since the last replication are
 sent. Indexing could also use this in a similar manner.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the last sequence number</DL>
</DD>
</DL>
<HR>

<A NAME="getDocumentCount()"><!-- --></A><H3>
getDocumentCount</H3>
<PRE>
int <B>getDocumentCount</B>()</PRE>
<DL>
<DD><p>Return the number of documents in the datastore</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>number of non-deleted documents in datastore</DL>
</DD>
</DL>
<HR>

<A NAME="changes(long, int)"><!-- --></A><H3>
changes</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/Changes.html" title="class in com.cloudant.sync.datastore">Changes</A> <B>changes</B>(long&nbsp;since,
                int&nbsp;limit)</PRE>
<DL>
<DD><p>Returns a list of changed documents, from <code>since</code> to
 <code>since + limit</code>, inclusive.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>since</CODE> - the lower bound (exclusive) of the change set
              sequence number<DD><CODE>limit</CODE> - <code>since + limit</code> is the upper bound (inclusive) of the
              change set sequence number
<DT><B>Returns:</B><DD>list of the documents and last sequence number of the change set
      (checkpoint)</DL>
</DD>
</DL>
<HR>

<A NAME="getEventBus()"><!-- --></A><H3>
getEventBus</H3>
<PRE>
com.google.common.eventbus.EventBus <B>getEventBus</B>()</PRE>
<DL>
<DD><p>Returns the EventBus which this Datastore posts
 <A HREF="../../../../com/cloudant/sync/notifications/DocumentModified.html" title="class in com.cloudant.sync.notifications"><CODE>Document Notification Events</CODE></A> to.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the Datastore's EventBus<DT><B>See Also:</B><DD><a href="https://code.google.com/p/guava-libraries/wiki/EventBusExplained">Google Guava EventBus documentation</a></DL>
</DD>
</DL>
<HR>

<A NAME="extensionDataFolder(java.lang.String)"><!-- --></A><H3>
extensionDataFolder</H3>
<PRE>
java.lang.String <B>extensionDataFolder</B>(java.lang.String&nbsp;extensionName)</PRE>
<DL>
<DD><p>Return the directory for specified extensionName</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>extensionName</CODE> - name of the extension
<DT><B>Returns:</B><DD>the directory for specified extensionName</DL>
</DD>
</DL>
<HR>

<A NAME="getConflictedDocumentIds()"><!-- --></A><H3>
getConflictedDocumentIds</H3>
<PRE>
java.util.Iterator&lt;java.lang.String&gt; <B>getConflictedDocumentIds</B>()</PRE>
<DL>
<DD><p>Return <code>@Iterable&lt;String&gt;</code> over ids to all the Documents with
 conflicted revisions.</p>

 <p>Document is modeled as a tree. If a document has at least two leaf
 revisions that not deleted, those leaf revisions considered
 conflicted revisions of the document.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>Iterable of String over ids of all Documents with
         conflicted revisions<DT><B>See Also:</B><DD><a href="http://wiki.apache.org/couchdb/Replication_and_conflicts">Replication and conflicts</a></DL>
</DD>
</DL>
<HR>

<A NAME="resolveConflictsForDocument(java.lang.String, com.cloudant.sync.datastore.ConflictResolver)"><!-- --></A><H3>
resolveConflictsForDocument</H3>
<PRE>
void <B>resolveConflictsForDocument</B>(java.lang.String&nbsp;docId,
                                 <A HREF="../../../../com/cloudant/sync/datastore/ConflictResolver.html" title="interface in com.cloudant.sync.datastore">ConflictResolver</A>&nbsp;resolver)
                                 throws <A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></PRE>
<DL>
<DD><p>
 Resolve conflicts for specified Document using the
 given <code>ConflictResolver</code>
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>docId</CODE> - id of Document to resolve conflicts<DD><CODE>resolver</CODE> - the ConflictResolver used to resolve
                 conflicts
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></CODE> - Found new conflicts while
         resolving the existing conflicted revision.
         This is very likely caused by new conflicted
         revision are added while the resolver is
         running.<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/ConflictResolver.html" title="interface in com.cloudant.sync.datastore"><CODE>ConflictResolver</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
void <B>close</B>()</PRE>
<DL>
<DD>Close the datastore
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatabaseNotCreatedException.html" title="class in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/Datastore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Datastore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
