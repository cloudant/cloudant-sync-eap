<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Mon Nov 18 17:42:36 GMT 2013 -->
<TITLE>
Datastore (cloudant-sync-datastore-android 0.1-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2013-11-18">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Datastore (cloudant-sync-datastore-android 0.1-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatabaseNotCreatedException.html" title="class in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/Datastore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Datastore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.cloudant.sync.datastore</FONT>
<BR>
Interface Datastore</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="../../../../com/cloudant/sync/datastore/Observable.html" title="interface in com.cloudant.sync.datastore">Observable</A></DD>
</DL>
<DL>
<DT><B>All Known Subinterfaces:</B> <DD><A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore">DatastoreExtended</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>Datastore</B><DT>extends <A HREF="../../../../com/cloudant/sync/datastore/Observable.html" title="interface in com.cloudant.sync.datastore">Observable</A></DL>
</PRE>

<P>
<p>The Datastore is the core interaction point for create, delete and update
 operations (CRUD) for within Cloudant Sync.</p>

 <p>The Datastore can be viewed as a pool of heterogeneous JSON documents. One
 datastore can hold many different types of document, unlike tables within a
 relational model. The datastore provides hooks, particularly in the
 <A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><CODE>DatastoreExtended</CODE></A> interface, which allow for various querying models
 to be built on top of its simpler key-value model.</p>

 <p>Each document consists of a set of revisions, hence most methods within
 this class operating on <A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore"><CODE>DBObject</CODE></A> objects, which carry both a
 document ID and a revision ID. This forms the basis of the MVCC data model,
 used to ensure safe peer-to-peer replication is possible.</p>

 <p>Each document is formed of a tree of revisions. Replication can create
 branches in this tree when changes have been made in two or more places to
 the same document in-between replications. MVCC exposes these branches as
 conflicted documents. These conflicts should be resolved by user-code, by
 marking all but one of the leaf nodes of the branches as "deleted", using
 the <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)"><CODE>deleteDocument(String, String)</CODE></A> method. When the
 datastore is next replicated with a remote datastore, this fix will be
 propagated, thereby resolving the conflicted document across the set of
 peers.</p>

 <p><strong>WARNING:</strong> conflict resolution is coming in the next
 release, where we'll be adding methods to:</p>

 <ul>
     <li>Get the IDs of all conflicted documents within the datastore.</li>
     <li>Get a list of all current revisions for a given document, so they
     can be merged to resolve the conflict.</li>
 </ul>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><CODE>DatastoreExtended</CODE></A>, 
<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore"><CODE>DBObject</CODE></A></DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#SEQUENCE_NUMBER_START">SEQUENCE_NUMBER_START</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The sequence number of the datastore when no updates have been made,
 -1L.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#containsDocument(java.lang.String)">containsDocument</A></B>(java.lang.String&nbsp;documentId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns whether this datastore contains any revisions of a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#containsDocument(java.lang.String, java.lang.String)">containsDocument</A></B>(java.lang.String&nbsp;documentId,
                 java.lang.String&nbsp;revisionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns whether this datastore contains a particular revision of
 a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#createDocument(com.cloudant.sync.datastore.DBBody)">createDocument</A></B>(<A HREF="../../../../com/cloudant/sync/datastore/DBBody.html" title="interface in com.cloudant.sync.datastore">DBBody</A>&nbsp;body)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a new document with an auto-generated ID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#createDocument(java.lang.String, com.cloudant.sync.datastore.DBBody)">createDocument</A></B>(java.lang.String&nbsp;documentId,
               <A HREF="../../../../com/cloudant/sync/datastore/DBBody.html" title="interface in com.cloudant.sync.datastore">DBBody</A>&nbsp;body)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a new document with an ID and body.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)">deleteDocument</A></B>(java.lang.String&nbsp;documentId,
               java.lang.String&nbsp;revisionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes a document from the datastore.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteIndex(java.lang.String)">deleteIndex</A></B>(java.lang.String&nbsp;indexName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes an index.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#ensureIndexed(java.lang.String, com.cloudant.sync.indexing.IndexType, com.cloudant.sync.indexing.IndexFunction)">ensureIndexed</A></B>(java.lang.String&nbsp;name,
              com.cloudant.sync.indexing.IndexType&nbsp;type,
              com.cloudant.sync.indexing.IndexFunction&nbsp;indexFunction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers an index with the datastore and make it available for
 use within the application.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#ensureIndexed(java.lang.String, java.lang.String)">ensureIndexed</A></B>(java.lang.String&nbsp;name,
              java.lang.String&nbsp;field)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers a new index with type <CODE>IndexType.STRING</CODE> that indexes
 a top-level field of documents.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#ensureIndexed(java.lang.String, java.lang.String, com.cloudant.sync.indexing.IndexType)">ensureIndexed</A></B>(java.lang.String&nbsp;name,
              java.lang.String&nbsp;field,
              com.cloudant.sync.indexing.IndexType&nbsp;type)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers a new index with a certain type that indexes a top-level
 field of documents.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getAllDocuments(int, int, boolean)">getAllDocuments</A></B>(int&nbsp;offset,
                int&nbsp;limit,
                boolean&nbsp;descending)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enumerates the current winning revision for all documents in the
 datastore.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument(java.lang.String)">getDocument</A></B>(java.lang.String&nbsp;documentId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current winning revision of a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocument(java.lang.String, java.lang.String)">getDocument</A></B>(java.lang.String&nbsp;documentId,
            java.lang.String&nbsp;revisionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves a given revision of a document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocumentCount()">getDocumentCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the number of documents in the datastore</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getDocumentsWithIds(java.util.List)">getDocumentsWithIds</A></B>(java.util.List&lt;java.lang.String&gt;&nbsp;documentIds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current winning revisions for a set of documents.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#getLastSequence()">getLastSequence</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the datastore's current sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;com.cloudant.sync.indexing.QueryResult</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#query(java.util.Map)">query</A></B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queries for <code>DBObject</code> objects.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#updateDocument(java.lang.String, java.lang.String, com.cloudant.sync.datastore.DBBody)">updateDocument</A></B>(java.lang.String&nbsp;documentId,
               java.lang.String&nbsp;prevRevisionId,
               <A HREF="../../../../com/cloudant/sync/datastore/DBBody.html" title="interface in com.cloudant.sync.datastore">DBBody</A>&nbsp;body)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates a document that exists in the datastore with a new revision.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_com.cloudant.sync.datastore.Observable"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface com.cloudant.sync.datastore.<A HREF="../../../../com/cloudant/sync/datastore/Observable.html" title="interface in com.cloudant.sync.datastore">Observable</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../com/cloudant/sync/datastore/Observable.html#registerObserver(java.util.Observer)">registerObserver</A>, <A HREF="../../../../com/cloudant/sync/datastore/Observable.html#unregisterObserver(java.util.Observer)">unregisterObserver</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="SEQUENCE_NUMBER_START"><!-- --></A><H3>
SEQUENCE_NUMBER_START</H3>
<PRE>
static final long <B>SEQUENCE_NUMBER_START</B></PRE>
<DL>
<DD>The sequence number of the datastore when no updates have been made,
 -1L.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.cloudant.sync.datastore.Datastore.SEQUENCE_NUMBER_START">Constant Field Values</A></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="createDocument(java.lang.String, com.cloudant.sync.datastore.DBBody)"><!-- --></A><H3>
createDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A> <B>createDocument</B>(java.lang.String&nbsp;documentId,
                        <A HREF="../../../../com/cloudant/sync/datastore/DBBody.html" title="interface in com.cloudant.sync.datastore">DBBody</A>&nbsp;body)</PRE>
<DL>
<DD><p>Adds a new document with an ID and body.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - id for the document<DD><CODE>body</CODE> - JSON body for the document
<DT><B>Returns:</B><DD><code>DBObject</code> of the newly created document</DL>
</DD>
</DL>
<HR>

<A NAME="createDocument(com.cloudant.sync.datastore.DBBody)"><!-- --></A><H3>
createDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A> <B>createDocument</B>(<A HREF="../../../../com/cloudant/sync/datastore/DBBody.html" title="interface in com.cloudant.sync.datastore">DBBody</A>&nbsp;body)</PRE>
<DL>
<DD><p>Adds a new document with an auto-generated ID.</p>

 <p>The document's ID will be auto-generated, and can be found by
 inspecting the returned <code>DBObject</code>.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>body</CODE> - JSON body for the document
<DT><B>Returns:</B><DD><code>DBObject</code> of the newly created document</DL>
</DD>
</DL>
<HR>

<A NAME="getDocument(java.lang.String)"><!-- --></A><H3>
getDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A> <B>getDocument</B>(java.lang.String&nbsp;documentId)</PRE>
<DL>
<DD><p>Returns the current winning revision of a document.</p>

 <p>Previously deleted documents can be retrieved
 (via tombstones, see <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)"><CODE>deleteDocument(String, String)</CODE></A>)
 </p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of document to retrieve.
<DT><B>Returns:</B><DD><code>DBObject</code> of the document or null if it doesn't exist.</DL>
</DD>
</DL>
<HR>

<A NAME="getDocument(java.lang.String, java.lang.String)"><!-- --></A><H3>
getDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A> <B>getDocument</B>(java.lang.String&nbsp;documentId,
                     java.lang.String&nbsp;revisionId)</PRE>
<DL>
<DD><p>Retrieves a given revision of a document.</p>

 <p>This method gets the revision of a document with a given ID. As the
 datastore prunes the content of old revisions to conserve space, this
 revision may contain the metadata but not content of the revision.</p>

 <p>Previously deleted documents can be retrieved
 (via tombstones, see <A HREF="../../../../com/cloudant/sync/datastore/Datastore.html#deleteDocument(java.lang.String, java.lang.String)"><CODE>deleteDocument(String, String)</CODE></A>)
 </p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of the document<DD><CODE>revisionId</CODE> - Revision of the document
<DT><B>Returns:</B><DD><code>DBObject</code> of the document or null if it doesn't exist.</DL>
</DD>
</DL>
<HR>

<A NAME="containsDocument(java.lang.String, java.lang.String)"><!-- --></A><H3>
containsDocument</H3>
<PRE>
boolean <B>containsDocument</B>(java.lang.String&nbsp;documentId,
                         java.lang.String&nbsp;revisionId)</PRE>
<DL>
<DD><p>Returns whether this datastore contains a particular revision of
 a document.</p>

 <p><code>true</code> will still be returned if the document is deleted.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - id of the document<DD><CODE>revisionId</CODE> - revision of the document
<DT><B>Returns:</B><DD><code>true</code> if specified document's particular revision exists
         in the datastore, <code>false</code> otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="containsDocument(java.lang.String)"><!-- --></A><H3>
containsDocument</H3>
<PRE>
boolean <B>containsDocument</B>(java.lang.String&nbsp;documentId)</PRE>
<DL>
<DD><p>Returns whether this datastore contains any revisions of a document.
 </p>

 <p><code>true</code> will still be returned if the document is deleted.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - id of the document
<DT><B>Returns:</B><DD><code>true</code> if specified document exists
         in the datastore, <code>false</code> otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="getAllDocuments(int, int, boolean)"><!-- --></A><H3>
getAllDocuments</H3>
<PRE>
java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A>&gt; <B>getAllDocuments</B>(int&nbsp;offset,
                                         int&nbsp;limit,
                                         boolean&nbsp;descending)</PRE>
<DL>
<DD><p>Enumerates the current winning revision for all documents in the
 datastore.</p>

 <p>Logically, this method takes all the documents in either ascending
 or descending order, skips all documents up to <code>offset</code> then
 returns up to <code>limit</code> document revisions, stopping either
 at <code>limit</code> or when the list of document is exhausted.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>offset</CODE> - start position<DD><CODE>limit</CODE> - maximum number of documents to return<DD><CODE>descending</CODE> - whether the documents are read in ascending or
                   descending order.
<DT><B>Returns:</B><DD>list of <code>DBObjects</code>, maximum length <code>limit</code>.</DL>
</DD>
</DL>
<HR>

<A NAME="getDocumentsWithIds(java.util.List)"><!-- --></A><H3>
getDocumentsWithIds</H3>
<PRE>
java.util.List&lt;<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A>&gt; <B>getDocumentsWithIds</B>(java.util.List&lt;java.lang.String&gt;&nbsp;documentIds)</PRE>
<DL>
<DD><p>Returns the current winning revisions for a set of documents.</p>

 <p>If the <code>documentIds</code> list contains document IDs not present
 in the datastore, they will be skipped and there will be no entry for
 them in the returned list.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentIds</CODE> - list of document id
<DT><B>Returns:</B><DD>list of <code>DBObject</code> objects.</DL>
</DD>
</DL>
<HR>

<A NAME="updateDocument(java.lang.String, java.lang.String, com.cloudant.sync.datastore.DBBody)"><!-- --></A><H3>
updateDocument</H3>
<PRE>
<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore">DBObject</A> <B>updateDocument</B>(java.lang.String&nbsp;documentId,
                        java.lang.String&nbsp;prevRevisionId,
                        <A HREF="../../../../com/cloudant/sync/datastore/DBBody.html" title="interface in com.cloudant.sync.datastore">DBBody</A>&nbsp;body)
                        throws <A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></PRE>
<DL>
<DD><p>Updates a document that exists in the datastore with a new revision.
 </p>

 <p>The <code>prevRevisionId</code> must match the current winning revision
 for the document.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of the document<DD><CODE>prevRevisionId</CODE> - revision id of the document's current winning
                       revision<DD><CODE>body</CODE> - body of the new revision
<DT><B>Returns:</B><DD>@{code DBObject} for the updated revision
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></CODE> - if the <code>prevRevisionId</code> is incorrect.</DL>
</DD>
</DL>
<HR>

<A NAME="deleteDocument(java.lang.String, java.lang.String)"><!-- --></A><H3>
deleteDocument</H3>
<PRE>
void <B>deleteDocument</B>(java.lang.String&nbsp;documentId,
                    java.lang.String&nbsp;revisionId)
                    throws <A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></PRE>
<DL>
<DD><p>Deletes a document from the datastore.</p>

 <p>This operation leaves a "tombstone" for the deleted document, so that
 future replication operations can successfully replicate the deletion.
 </p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>documentId</CODE> - ID of the document to delete.<DD><CODE>revisionId</CODE> - revision id of the document's current winning revision
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/cloudant/sync/datastore/ConflictException.html" title="class in com.cloudant.sync.datastore">ConflictException</A></CODE> - if the revisionId is not the current revision</DL>
</DD>
</DL>
<HR>

<A NAME="getLastSequence()"><!-- --></A><H3>
getLastSequence</H3>
<PRE>
long <B>getLastSequence</B>()</PRE>
<DL>
<DD><p>Retrieves the datastore's current sequence number.</p>

 <p>The datastore's sequence number is incremented every time the
 content of the datastore is changed. Each document revision within the
 datastore has an associated sequence number, describing when the change
 took place.</p>

 <p>The sequence number is particularly useful to find out the changes
 to the database since a given time. For example, replication uses the
 sequence number so only the changes since the last replication are
 sent. Indexing could also use this in a similar manner.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the last sequence number</DL>
</DD>
</DL>
<HR>

<A NAME="getDocumentCount()"><!-- --></A><H3>
getDocumentCount</H3>
<PRE>
int <B>getDocumentCount</B>()</PRE>
<DL>
<DD><p>Return the number of documents in the datastore</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>number of non-deleted documents in datastore</DL>
</DD>
</DL>
<HR>

<A NAME="ensureIndexed(java.lang.String, com.cloudant.sync.indexing.IndexType, com.cloudant.sync.indexing.IndexFunction)"><!-- --></A><H3>
ensureIndexed</H3>
<PRE>
void <B>ensureIndexed</B>(java.lang.String&nbsp;name,
                   com.cloudant.sync.indexing.IndexType&nbsp;type,
                   com.cloudant.sync.indexing.IndexFunction&nbsp;indexFunction)
                   throws com.cloudant.sync.indexing.IndexNameExistsException</PRE>
<DL>
<DD><p>Registers an index with the datastore and make it available for
 use within the application.</p>

 <p>The name passed to this function is the one specified at query time,
 via the <CODE>QueryBuilder</CODE>.</p>

 <p>The call will block until the given index is up to date.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - case-sensitive name of the index. Can only contain letters,
             digits and underscores. It must not start with a digit.<DD><CODE>type</CODE> - type of the index.<DD><CODE>indexFunction</CODE> - the function to use to map between a document and
                      indexed value(s).
<DT><B>Throws:</B>
<DD><CODE>com.cloudant.sync.indexing.IndexNameExistsException</CODE> - if an index
          with the same name has already been registered.<DT><B>See Also:</B><DD><CODE>QueryBuilder</CODE>, 
<A HREF="../../../../com/cloudant/sync/datastore/DBObject.html" title="interface in com.cloudant.sync.datastore"><CODE>DBObject</CODE></A>, 
<CODE>IndexType</CODE>, 
<CODE>IndexFunction</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="ensureIndexed(java.lang.String, java.lang.String, com.cloudant.sync.indexing.IndexType)"><!-- --></A><H3>
ensureIndexed</H3>
<PRE>
void <B>ensureIndexed</B>(java.lang.String&nbsp;name,
                   java.lang.String&nbsp;field,
                   com.cloudant.sync.indexing.IndexType&nbsp;type)
                   throws com.cloudant.sync.indexing.IndexNameExistsException</PRE>
<DL>
<DD><p>Registers a new index with a certain type that indexes a top-level
 field of documents.</p>

 <p>This method is equivalent to:</p>

 <pre>
     IndexFunction f = new FieldIndexFunction(field);
     datastore.ensureIndexed(name, type, f);
 </pre>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - case-sensitive name of the index. Can only contain letters,
             digits and underscores. It must not start with a digit.<DD><CODE>field</CODE> - top-level field use for index values<DD><CODE>type</CODE> - IndexType of the index.
<DT><B>Throws:</B>
<DD><CODE>com.cloudant.sync.indexing.IndexNameExistsException</CODE> - if an index with the same
          name has already been registered.<DT><B>See Also:</B><DD><CODE>QueryBuilder</CODE>, 
<CODE>IndexType</CODE>, 
<CODE>FieldIndexFunction</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="ensureIndexed(java.lang.String, java.lang.String)"><!-- --></A><H3>
ensureIndexed</H3>
<PRE>
void <B>ensureIndexed</B>(java.lang.String&nbsp;name,
                   java.lang.String&nbsp;field)
                   throws com.cloudant.sync.indexing.IndexNameExistsException</PRE>
<DL>
<DD><p>Registers a new index with type <CODE>IndexType.STRING</CODE> that indexes
 a top-level field of documents.</p>

 <p>This method is equivalent to:</p>

 <pre>
     IndexFunction f = new FieldIndexFunction(field);
     datastore.ensureIndexed(name, IndexType.STRING, f);
 </pre>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - case-sensitive name of the index. Can only contain letters,
             digits and underscores. It must not start with a digit.<DD><CODE>field</CODE> - top-level field use for index values
<DT><B>Throws:</B>
<DD><CODE>com.cloudant.sync.indexing.IndexNameExistsException</CODE> - if an index with the same
          name has already been registered.<DT><B>See Also:</B><DD><CODE>QueryBuilder</CODE>, 
<CODE>IndexType</CODE>, 
<CODE>FieldIndexFunction</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="deleteIndex(java.lang.String)"><!-- --></A><H3>
deleteIndex</H3>
<PRE>
void <B>deleteIndex</B>(java.lang.String&nbsp;indexName)</PRE>
<DL>
<DD><p>Deletes an index.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>indexName</CODE> - name of the index to delete</DL>
</DD>
</DL>
<HR>

<A NAME="query(java.util.Map)"><!-- --></A><H3>
query</H3>
<PRE>
com.cloudant.sync.indexing.QueryResult <B>query</B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;query)</PRE>
<DL>
<DD><p>Queries for <code>DBObject</code> objects.</p>

 <p>Using a <CODE>QueryBuilder</CODE> to create
 the <code>query</code> is recommended.</p>

 <p>Otherwise, the <code>query</code> should have fields as keys and the
 query for that field as a value.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>query</CODE> - query
<DT><B>Returns:</B><DD>an arbitrarily ordered list of <code>DBObject</code>s matching the
          query.<DT><B>See Also:</B><DD><CODE>QueryResult</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatabaseNotCreatedException.html" title="class in com.cloudant.sync.datastore"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/cloudant/sync/datastore/DatastoreExtended.html" title="interface in com.cloudant.sync.datastore"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/cloudant/sync/datastore/Datastore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Datastore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
